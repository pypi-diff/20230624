# Comparing `tmp/odoo_addon_account_payment_return-15.0.1.0.0.5-py3-none-any.whl.zip` & `tmp/odoo_addon_account_payment_return-16.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,65 +1,65 @@
-Zip file size: 137597 bytes, number of entries: 63
--rw-r--r--  2.0 unx     4002 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/README.rst
--rw-r--r--  2.0 unx       86 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/__init__.py
--rw-r--r--  2.0 unx     1409 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/__manifest__.py
--rw-r--r--  2.0 unx      588 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/data/ir_sequence_data.xml
--rw-r--r--  2.0 unx    19595 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/account_payment_return.pot
--rw-r--r--  2.0 unx    21047 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/am.po
--rw-r--r--  2.0 unx    21063 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/ar.po
--rw-r--r--  2.0 unx    21160 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/bg.po
--rw-r--r--  2.0 unx    21451 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/ca.po
--rw-r--r--  2.0 unx    21000 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/cs.po
--rw-r--r--  2.0 unx    22056 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/de.po
--rw-r--r--  2.0 unx    21154 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/el_GR.po
--rw-r--r--  2.0 unx    21948 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es.po
--rw-r--r--  2.0 unx    24385 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_AR.po
--rw-r--r--  2.0 unx    20995 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_CR.po
--rw-r--r--  2.0 unx    20992 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_EC.po
--rw-r--r--  2.0 unx    21062 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_ES.po
--rw-r--r--  2.0 unx    20991 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_MX.po
--rw-r--r--  2.0 unx    20994 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/es_VE.po
--rw-r--r--  2.0 unx    20974 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/et.po
--rw-r--r--  2.0 unx    21064 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/fi.po
--rw-r--r--  2.0 unx    23083 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/fr.po
--rw-r--r--  2.0 unx    21049 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/gl.po
--rw-r--r--  2.0 unx    21140 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/hr.po
--rw-r--r--  2.0 unx    21134 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/hr_HR.po
--rw-r--r--  2.0 unx    21476 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/it.po
--rw-r--r--  2.0 unx    21046 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/lt.po
--rw-r--r--  2.0 unx    22041 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/nl.po
--rw-r--r--  2.0 unx    20991 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/nl_BE.po
--rw-r--r--  2.0 unx    21034 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/pl.po
--rw-r--r--  2.0 unx    21061 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/pt.po
--rw-r--r--  2.0 unx    21189 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/pt_BR.po
--rw-r--r--  2.0 unx    22130 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/pt_PT.po
--rw-r--r--  2.0 unx    21021 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/ro.po
--rw-r--r--  2.0 unx    21128 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/ru.po
--rw-r--r--  2.0 unx    23444 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/sl.po
--rw-r--r--  2.0 unx    20976 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/th.po
--rw-r--r--  2.0 unx    21029 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/tr.po
--rw-r--r--  2.0 unx    20974 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/vi.po
--rw-r--r--  2.0 unx    21031 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/i18n/zh_CN.po
--rw-r--r--  2.0 unx      187 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/models/__init__.py
--rw-r--r--  2.0 unx      587 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/models/account_journal.py
--rw-r--r--  2.0 unx     3495 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/models/account_move.py
--rw-r--r--  2.0 unx    17121 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/models/payment_return.py
--rw-r--r--  2.0 unx      852 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/models/payment_return_reason.py
--rw-r--r--  2.0 unx      294 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      287 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      761 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/readme/USAGE.rst
--rw-r--r--  2.0 unx      604 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/security/account_payment_return_security.xml
--rw-r--r--  2.0 unx      401 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/static/description/icon.png
--rw-r--r--  2.0 unx    13680 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/static/description/index.html
--rw-r--r--  2.0 unx      127 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/static/src/scss/account_payment_return.scss
--rw-r--r--  2.0 unx      980 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml
--rw-r--r--  2.0 unx      100 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/tests/__init__.py
--rw-r--r--  2.0 unx    10612 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/tests/test_payment_return.py
--rw-r--r--  2.0 unx      695 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/views/account_journal_view.xml
--rw-r--r--  2.0 unx     1426 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/views/account_move_views.xml
--rw-r--r--  2.0 unx     7254 b- defN 23-Jun-09 02:49 odoo/addons/account_payment_return/views/payment_return_view.xml
--rw-r--r--  2.0 unx     4633 b- defN 23-Jun-09 02:49 odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-09 02:49 odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-09 02:49 odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     6884 b- defN 23-Jun-09 02:49 odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/RECORD
-63 files, 855525 bytes uncompressed, 126131 bytes compressed:  85.3%
+Zip file size: 137651 bytes, number of entries: 63
+-rw-r--r--  2.0 unx     4002 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/README.rst
+-rw-r--r--  2.0 unx       86 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/__init__.py
+-rw-r--r--  2.0 unx     1404 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/__manifest__.py
+-rw-r--r--  2.0 unx      588 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/data/ir_sequence_data.xml
+-rw-r--r--  2.0 unx    19095 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/account_payment_return.pot
+-rw-r--r--  2.0 unx    21047 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/am.po
+-rw-r--r--  2.0 unx    21063 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/ar.po
+-rw-r--r--  2.0 unx    21160 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/bg.po
+-rw-r--r--  2.0 unx    21451 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/ca.po
+-rw-r--r--  2.0 unx    21000 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/cs.po
+-rw-r--r--  2.0 unx    22056 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/de.po
+-rw-r--r--  2.0 unx    21154 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/el_GR.po
+-rw-r--r--  2.0 unx    21948 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es.po
+-rw-r--r--  2.0 unx    24385 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_AR.po
+-rw-r--r--  2.0 unx    20995 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_CR.po
+-rw-r--r--  2.0 unx    20992 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_EC.po
+-rw-r--r--  2.0 unx    21062 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_ES.po
+-rw-r--r--  2.0 unx    20991 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_MX.po
+-rw-r--r--  2.0 unx    20994 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/es_VE.po
+-rw-r--r--  2.0 unx    20974 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/et.po
+-rw-r--r--  2.0 unx    21064 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/fi.po
+-rw-r--r--  2.0 unx    23083 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/fr.po
+-rw-r--r--  2.0 unx    21049 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/gl.po
+-rw-r--r--  2.0 unx    21140 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/hr.po
+-rw-r--r--  2.0 unx    21134 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/hr_HR.po
+-rw-r--r--  2.0 unx    21476 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/it.po
+-rw-r--r--  2.0 unx    21046 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/lt.po
+-rw-r--r--  2.0 unx    22041 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/nl.po
+-rw-r--r--  2.0 unx    20991 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/nl_BE.po
+-rw-r--r--  2.0 unx    21034 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/pl.po
+-rw-r--r--  2.0 unx    21061 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/pt.po
+-rw-r--r--  2.0 unx    21189 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/pt_BR.po
+-rw-r--r--  2.0 unx    22130 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/pt_PT.po
+-rw-r--r--  2.0 unx    21021 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/ro.po
+-rw-r--r--  2.0 unx    21128 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/ru.po
+-rw-r--r--  2.0 unx    23444 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/sl.po
+-rw-r--r--  2.0 unx    20976 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/th.po
+-rw-r--r--  2.0 unx    21029 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/tr.po
+-rw-r--r--  2.0 unx    20974 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/vi.po
+-rw-r--r--  2.0 unx    21031 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/i18n/zh_CN.po
+-rw-r--r--  2.0 unx      187 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/models/__init__.py
+-rw-r--r--  2.0 unx      587 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/models/account_journal.py
+-rw-r--r--  2.0 unx     4413 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/models/account_move.py
+-rw-r--r--  2.0 unx    17131 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/models/payment_return.py
+-rw-r--r--  2.0 unx      522 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/models/payment_return_reason.py
+-rw-r--r--  2.0 unx      294 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      287 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      761 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/readme/USAGE.rst
+-rw-r--r--  2.0 unx      604 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/security/account_payment_return_security.xml
+-rw-r--r--  2.0 unx      401 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/static/description/icon.png
+-rw-r--r--  2.0 unx    13680 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/static/description/index.html
+-rw-r--r--  2.0 unx      127 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/static/src/scss/account_payment_return.scss
+-rw-r--r--  2.0 unx      998 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml
+-rw-r--r--  2.0 unx      100 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/tests/__init__.py
+-rw-r--r--  2.0 unx    10246 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/tests/test_payment_return.py
+-rw-r--r--  2.0 unx      695 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/views/account_journal_view.xml
+-rw-r--r--  2.0 unx     1426 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/views/account_move_views.xml
+-rw-r--r--  2.0 unx     7259 b- defN 23-Jun-23 17:10 odoo/addons/account_payment_return/views/payment_return_view.xml
+-rw-r--r--  2.0 unx     4634 b- defN 23-Jun-23 17:10 odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-23 17:10 odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-23 17:10 odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6884 b- defN 23-Jun-23 17:10 odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/RECORD
+63 files, 855276 bytes uncompressed, 126185 bytes compressed:  85.2%
```

## zipnote {}

```diff
@@ -171,20 +171,20 @@
 
 Filename: odoo/addons/account_payment_return/views/account_move_views.xml
 Comment: 
 
 Filename: odoo/addons/account_payment_return/views/payment_return_view.xml
 Comment: 
 
-Filename: odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/METADATA
+Filename: odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/WHEEL
+Filename: odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/top_level.txt
+Filename: odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/RECORD
+Filename: odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/account_payment_return/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Faccount--payment-lightgray.png?logo=github
-    :target: https://github.com/OCA/account-payment/tree/15.0/account_payment_return
+    :target: https://github.com/OCA/account-payment/tree/16.0/account_payment_return
     :alt: OCA/account-payment
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/account-payment-15-0/account-payment-15-0-account_payment_return
+    :target: https://translation.odoo-community.org/projects/account-payment-16-0/account-payment-16-0-account_payment_return
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/96/15.0
+    :target: https://runbot.odoo-community.org/runbot/96/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module implements customer receivables returns and allows to send
 related reconciled account move lines back to a state where the debt is still
 open, and letting history of it.
@@ -59,15 +59,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/account-payment/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -103,10 +103,10 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/account-payment <https://github.com/OCA/account-payment/tree/15.0/account_payment_return>`_ project on GitHub.
+This module is part of the `OCA/account-payment <https://github.com/OCA/account-payment/tree/16.0/account_payment_return>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/account_payment_return/__manifest__.py

```diff
@@ -7,15 +7,15 @@
 # Copyright 2016-2023 Tecnativa - Carlos Dauden
 # Copyright 2017 Tecnativa - David Vidal
 # Copyright 2021 Tecnativa - João Marques
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Account Payment Returns",
-    "version": "15.0.1.0.0",
+    "version": "16.0.1.0.0",
     "summary": "Manage the return of your payments",
     "license": "AGPL-3",
     "depends": ["mail", "account"],
     "development_status": "Mature",
     "author": "Odoo Community Association (OCA),"
     "7 i TRIA, "
     "Tecnativa, "
@@ -28,12 +28,12 @@
         "views/account_journal_view.xml",
         "data/ir_sequence_data.xml",
         "views/account_move_views.xml",
     ],
     "assets": {
         "web.assets_backend": [
             "account_payment_return/static/src/scss/account_payment_return.scss",
+            "account_payment_return/static/src/**/*",
         ],
     },
-    "qweb": ["static/src/xml/account_payment_return.xml"],
     "installable": True,
 }
```

## odoo/addons/account_payment_return/i18n/account_payment_return.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* account_payment_return
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -20,14 +20,15 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return_line__reason_additional_information
 msgid "Additional information on return reason."
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "All payments must be owned by the same partner"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return_line__amount
@@ -177,15 +178,14 @@
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return_line__id
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return_reason__id
 msgid "ID"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return__message_needaction
-#: model:ir.model.fields,help:account_payment_return.field_payment_return__message_unread
 msgid "If checked, new messages require your attention."
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return__message_has_error
 #: model:ir.model.fields,help:account_payment_return.field_payment_return__message_has_sms_error
 msgid "If checked, some messages have a delivery error."
@@ -193,28 +193,22 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields.selection,name:account_payment_return.selection__payment_return__state__imported
 msgid "Imported"
 msgstr ""
 
 #. module: account_payment_return
-#. openerp-web
-#: code:addons/account_payment_return/static/src/xml/account_payment_return.xml:0
-#, python-format
-msgid "Info"
-msgstr ""
-
-#. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_account_bank_statement_line__returned_payment
 #: model:ir.model.fields,help:account_payment_return.field_account_move__returned_payment
 #: model:ir.model.fields,help:account_payment_return.field_account_payment__returned_payment
 msgid "Invoice has been included on a payment that has been returned later."
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "Invoice: %s"
 msgstr ""
 
 #. module: account_payment_return
 #: model_terms:ir.ui.view,arch_db:account_payment_return.view_account_invoice_filter
@@ -290,20 +284,22 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__message_ids
 msgid "Messages"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "Move lines: %s"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "Move: %s"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__message_needaction_counter
@@ -322,19 +318,14 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return__message_has_error_counter
 msgid "Number of messages with delivery error"
 msgstr ""
 
 #. module: account_payment_return
-#: model:ir.model.fields,help:account_payment_return.field_payment_return__message_unread_counter
-msgid "Number of unread messages"
-msgstr ""
-
-#. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return_line__date
 msgid "Only for reference"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_account_partial_reconcile__origin_returned_move_ids
 msgid "Origin Returned Move"
@@ -352,21 +343,22 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return_line__partner_name
 msgid "Partner Name"
 msgstr ""
 
 #. module: account_payment_return
-#. openerp-web
+#. odoo-javascript
 #: code:addons/account_payment_return/static/src/xml/account_payment_return.xml:0
 #, python-format
 msgid "Payment Info"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid ""
 "Payment Line: %(move_names)s (%(partner_name)s) in Payment Return: "
 "%(return_name)s"
 msgstr ""
 
@@ -377,14 +369,15 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return_line__move_line_ids
 msgid "Payment Reference"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid ""
 "Payment reference must be unique\n"
 "%s"
 msgstr ""
 
@@ -436,14 +429,15 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__move_id
 msgid "Reference to the created journal entry"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "Return %s"
 msgstr ""
 
 #. module: account_payment_return
@@ -469,14 +463,21 @@
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return_line__amount
 msgid "Returned amount. Can be different from the move amount"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
+#: code:addons/account_payment_return/models/account_move.py:0
+#, python-format
+msgid "Returned on"
+msgstr ""
+
+#. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__message_has_sms_error
 msgid "SMS Delivery error"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__state
 #: model_terms:ir.ui.view,arch_db:account_payment_return.payment_return_search_view
@@ -501,37 +502,29 @@
 
 #. module: account_payment_return
 #: model_terms:ir.ui.view,arch_db:account_payment_return.payment_return_form_view
 msgid "Total charges amount"
 msgstr ""
 
 #. module: account_payment_return
-#: model:ir.model.fields,field_description:account_payment_return.field_payment_return__message_unread
-msgid "Unread Messages"
-msgstr ""
-
-#. module: account_payment_return
-#: model:ir.model.fields,field_description:account_payment_return.field_payment_return__message_unread_counter
-msgid "Unread Messages Counter"
-msgstr ""
-
-#. module: account_payment_return
 #: model:ir.model.fields,field_description:account_payment_return.field_payment_return__website_message_ids
 msgid "Website Messages"
 msgstr ""
 
 #. module: account_payment_return
 #: model:ir.model.fields,help:account_payment_return.field_payment_return__website_message_ids
 msgid "Website communication history"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "You can not remove a payment return if state is 'Done'"
 msgstr ""
 
 #. module: account_payment_return
+#. odoo-python
 #: code:addons/account_payment_return/models/payment_return.py:0
 #, python-format
 msgid "You must input all moves references in the payment return."
 msgstr ""
```

## odoo/addons/account_payment_return/models/account_move.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2016 Tecnativa Carlos Dauden
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
-from operator import itemgetter
 
-from odoo import fields, models
+from odoo import _, fields, models
+from odoo.tools import formatLang
 
 
 class AccountMove(models.Model):
     _inherit = "account.move"
 
     returned_payment = fields.Boolean(
         string="Payment returned",
@@ -23,56 +23,75 @@
         returned_invoices.filtered(lambda x: not x.returned_payment).write(
             {"returned_payment": True}
         )
         (self - returned_invoices).filtered("returned_payment").write(
             {"returned_payment": False}
         )
 
-    def _get_reconciled_info_JSON_values(self):
-        values = super()._get_reconciled_info_JSON_values()
+    def prepare_values_returned_widget(self, line_id, amount, is_return=False):
+        try:
+            payment_method_name = line_id.payment_method_line_id.name
+        except AttributeError:
+            payment_method_name = False
+        return {
+            "name": line_id.name,
+            "journal_name": line_id.journal_id.name,
+            "amount": amount,
+            "date": line_id.date,
+            "partial_id": line_id.id,
+            "currency_id": line_id.currency_id,
+            "currency": line_id.currency_id.symbol,
+            "position": line_id.currency_id.position,
+            "move_id": line_id.move_id.id,
+            "amount_company_currency": formatLang(
+                self.env,
+                abs(amount),
+                currency_obj=line_id.currency_id,
+            ),
+            "payment_method_name": payment_method_name,
+            "ref": "{} ({})".format(line_id.move_id.name, line_id.ref),
+            "returned": is_return,
+        }
+
+    def _compute_payments_widget_reconciled_info(self):
         if not self.returned_payment:
-            return values
-        returned_reconciles = self.env["account.partial.reconcile"].search(
-            [("origin_returned_move_ids.move_id", "=", self.id)]
-        )
-        for returned_reconcile in returned_reconciles:
-            payment = returned_reconcile.credit_move_id
-            payment_ret = returned_reconcile.debit_move_id
-            values.append(
-                {
-                    "name": payment.name,
-                    "journal_name": payment.journal_id.name,
-                    "amount": returned_reconcile.amount,
-                    "currency": self.currency_id.symbol,
-                    "digits": [69, self.currency_id.decimal_places],
-                    "position": self.currency_id.position,
-                    "date": payment.date,
-                    "payment_id": payment.id,
-                    "move_id": payment.move_id.id,
-                    "ref": payment.move_id.name,
-                }
-            )
-            values.append(
-                {
-                    "name": payment_ret.name,
-                    "journal_name": payment_ret.journal_id.name,
-                    "amount": -returned_reconcile.amount,
-                    "currency": self.currency_id.symbol,
-                    "digits": [69, self.currency_id.decimal_places],
-                    "position": self.currency_id.position,
-                    "date": payment_ret.date,
-                    "payment_id": payment_ret.id,
-                    "move_id": payment_ret.move_id.id,
-                    "ref": "{} ({})".format(
-                        payment_ret.move_id.name, payment_ret.move_id.ref
-                    ),
-                    "returned": True,
+            return super()._compute_payments_widget_reconciled_info()
+        else:
+            for move in self:
+                values_returned = []
+                payments_widget_vals = {
+                    "outstanding": False,
+                    "content": values_returned,
+                    "move_id": move.id,
+                    "title": _("Returned on"),
                 }
-            )
-        return sorted(values, key=itemgetter("date"), reverse=True)
+                reconciled_payments = move._get_reconciled_payments()
+                domain = [("origin_returned_move_ids.move_id", "=", move.id)]
+                if len(reconciled_payments) > 0:
+                    for rec_payment in reconciled_payments:
+                        vals_rec_payment = self.prepare_values_returned_widget(
+                            rec_payment, rec_payment.amount
+                        )
+                        values_returned.append(vals_rec_payment)
+                move_reconciles = self.env["account.partial.reconcile"].search(domain)
+                for move_reconcile in move_reconciles:
+                    payment_ret = move_reconcile.debit_move_id
+                    payment = move_reconcile.credit_move_id
+                    vals_payment = self.prepare_values_returned_widget(
+                        payment, move_reconcile.amount
+                    )
+                    values_returned.append(vals_payment)
+                    vals_reconcile = self.prepare_values_returned_widget(
+                        payment_ret, -move_reconcile.amount, True
+                    )
+                    values_returned.append(vals_reconcile)
+                if payments_widget_vals["content"]:
+                    move.invoice_payments_widget = payments_widget_vals
+                else:
+                    move.invoice_payments_widget = False
 
 
 class AccountMoveLine(models.Model):
     _inherit = "account.move.line"
 
     partial_reconcile_returned_ids = fields.Many2many(
         comodel_name="account.partial.reconcile",
```

## odoo/addons/account_payment_return/models/payment_return.py

```diff
@@ -225,15 +225,15 @@
         invoices.write(self._prepare_invoice_returned_vals())
         self.write({"state": "done", "move_id": move.id})
         return True
 
     def action_cancel(self):
         invoices = self.env["account.move"]
         for move_line in self.mapped("move_id.line_ids").filtered(
-            lambda x: x.account_internal_type == "receivable"
+            lambda x: x.account_type == "asset_receivable"
         ):
             for partial_line in move_line.matched_credit_ids:
                 invoices |= partial_line.origin_returned_move_ids.mapped("move_id")
                 lines2reconcile = (
                     partial_line.origin_returned_move_ids | partial_line.credit_move_id
                 )
                 partial_line.credit_move_id.remove_move_reconcile()
@@ -319,16 +319,16 @@
     def match_invoice(self):
         for line in self:
             domain = line.partner_id and [("partner_id", "=", line.partner_id.id)] or []
             domain += [("name", "=", line.reference), ("move_type", "=", "out_invoice")]
             invoice = self.env["account.move"].search(domain)
             if invoice:
                 invoice_line_ids = invoice.line_ids.filtered(
-                    lambda line: line.account_id.user_type_id.type
-                    in ("receivable", "payable")
+                    lambda line: line.account_id.account_type
+                    in ("asset_receivable", "liability_payable")
                 )
                 payment_lines = invoice_line_ids.mapped(
                     "matched_debit_ids.debit_move_id"
                 )
                 payment_lines |= invoice_line_ids.mapped(
                     "matched_credit_ids.credit_move_id"
                 )
@@ -343,15 +343,15 @@
             if line.return_id.journal_id:
                 domain += [
                     ("journal_id", "=", line.return_id.journal_id.id),
                     ("move_id.move_type", "=", "entry"),
                 ]
             domain.extend(
                 [
-                    ("account_id.internal_type", "=", "receivable"),
+                    ("account_id.account_type", "=", "asset_receivable"),
                     ("reconciled", "=", True),
                     "|",
                     ("name", "=", line.reference),
                     ("ref", "=", line.reference),
                 ]
             )
             move_lines = self.env["account.move.line"].search(domain)
@@ -365,15 +365,15 @@
     def match_move(self):
         for line in self:
             domain = line.partner_id and [("partner_id", "=", line.partner_id.id)] or []
             domain += [("name", "=", line.reference), ("move_type", "=", "entry")]
             move = self.env["account.move"].search(domain)
             if move:
                 line.move_line_ids = move.line_ids.filtered(
-                    lambda l: (l.account_internal_type == "receivable" and l.reconciled)
+                    lambda l: (l.account_type == "asset_receivable" and l.reconciled)
                 ).ids
                 if not line.concept:
                     line.concept = _("Move: %s") % move.ref
 
     def _find_match(self):
         # we filter again to remove all ready matched lines in inheritance
         lines2match = self.filtered(lambda x: ((not x.move_line_ids) and x.reference))
```

## odoo/addons/account_payment_return/models/payment_return_reason.py

```diff
@@ -1,27 +1,18 @@
 # Copyright 2016 Tecnativa - Carlos Dauden
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
-from odoo import api, fields, models
+from odoo import fields, models
 
 
 class PaymentReturnReason(models.Model):
     _name = "payment.return.reason"
     _description = "Payment return reason"
+    _rec_names_search = ["name", "code"]
 
     code = fields.Char()
     name = fields.Char(string="Reason", translate=True)
 
-    @api.model
-    def name_search(self, name, args=None, operator="ilike", limit=100):
-        args = args or []
-        recs = self.browse()
-        if name:
-            recs = self.search([("code", "=", name)] + args, limit=limit)
-        if not recs:
-            recs = self.search([("name", operator, name)] + args, limit=limit)
-        return recs.name_get()
-
     def name_get(self):
         return [
             (r.id, "[{code}] {name}".format(code=r.code, name=r.name)) for r in self
         ]
```

## odoo/addons/account_payment_return/static/description/index.html

### odoo/addons/account_payment_return/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Mature" src="https://img.shields.io/badge/maturity-Mature-brightgreen.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/account-payment/tree/15.0/account_payment_return">
+        <a class="reference external" href="https://github.com/OCA/account-payment/tree/16.0/account_payment_return">
           <img alt="OCA/account-payment" src="https://img.shields.io/badge/github-OCA%2Faccount--payment-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/account-payment-15-0/account-payment-15-0-account_payment_return">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/account-payment-16-0/account-payment-16-0-account_payment_return">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/96/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/96/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>This module implements customer receivables returns and allows to send
 related reconciled account move lines back to a state where the debt is still
 open, and letting history of it.</p>
       <p>This module can be extended adding importers that automatically fills the
@@ -449,15 +449,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/account-payment/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id3">Credits</a>
@@ -517,15 +517,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/account-payment/tree/15.0/account_payment_return">OCA/account-payment</a>
+            <a class="reference external" href="https://github.com/OCA/account-payment/tree/16.0/account_payment_return">OCA/account-payment</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml

### odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml

```diff
@@ -1,16 +1,17 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!-- Copyright 2016 Tecnativa - Carlos Dauden
      License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl-3). -->
 <templates xml:space="preserve">
-  <t t-extend="ShowPaymentInfo">
-    <t t-jquery=".js_payment_info" t-operation="replace">
-      <a role="button" tabindex="0" t-attf-class="js_payment_info fa fa-#{line.returned and 'warning' or 'info-circle'}" t-att-index="line.index" style="margin-right:5px;" aria-label="Info" title="Payment Info" data-toggle="tooltip"/>
-    </t>
-    <t t-jquery=".o_field_widget" t-operation="replace">
-      <i class="o_field_widget text-right o_payment_label">
+  <t t-inherit="account.AccountPaymentField" t-inherit-mode="extension">
+    <xpath expr="//a[@class='js_payment_info fa fa-info-circle']" position="attributes">
+      <attribute name="t-attf-class">js_payment_info fa fa-#{line.returned and 'warning' or 'info-circle'}</attribute>
+      <attribute name="title">Payment Info</attribute>
+    </xpath>
+    <xpath expr="//i[@class='o_field_widget text-start o_payment_label']" position="replace">
+      <i class="o_field_widget text-start o_payment_label">
         <t t-esc="line.returned and 'Returned on ' or 'Paid on '"/>
         <t t-esc="line.date"/>
       </i>
-    </t>
+    </xpath>
   </t>
 </templates>
```

## odoo/addons/account_payment_return/tests/test_payment_return.py

```diff
@@ -1,34 +1,29 @@
 # Copyright 2015 Tecnativa - Pedro M. Baeza
 # Copyright 2016 Tecnativa - Carlos Dauden
 # Copyright 2017 Tecnativa - David Vidal
 # Copyright 2017 Tecnativa - Luis M. Ontalba
 # License AGPL-3 - See http://www.gnu.org/licenses/agpl-3.0.html
 
-import json
-
 from odoo.exceptions import UserError, ValidationError
 from odoo.tests.common import Form, TransactionCase
 
 
 class TestPaymentReturn(TransactionCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.journal = cls.env["account.journal"].create(
             {"name": "Test Sales Journal", "code": "tVEN", "type": "sale"}
         )
-        cls.account_type = cls.env["account.account.type"].create(
-            {"name": "Test", "type": "receivable", "internal_group": "asset"}
-        )
         cls.account = cls.env["account.account"].create(
             {
                 "name": "Test account",
                 "code": "TEST",
-                "user_type_id": cls.account_type.id,
+                "account_type": "asset_receivable",
                 "reconcile": True,
             }
         )
         cls.partner_expense = cls.env["res.partner"].create({"name": "PE"})
         cls.bank_journal = cls.env["account.journal"].create(
             {
                 "name": "Test Bank Journal",
@@ -38,23 +33,18 @@
                 "default_expense_partner_id": cls.partner_expense.id,
             }
         )
         cls.account_income = cls.env["account.account"].create(
             {
                 "name": "Test income account",
                 "code": "INCOME",
-                "user_type_id": cls.env["account.account.type"]
-                .create(
-                    {"name": "Test income", "type": "other", "internal_group": "income"}
-                )
-                .id,
+                "account_type": "income_other",
             }
         )
         cls.partner = cls.env["res.partner"].create({"name": "Test"})
-        cls.partner_1 = cls.env["res.partner"].create({"name": "Test 1"})
         cls.invoice = cls.env["account.move"].create(
             {
                 "move_type": "out_invoice",
                 "journal_id": cls.journal.id,
                 "company_id": cls.env.user.company_id.id,
                 "currency_id": cls.env.user.company_id.currency_id.id,
                 "partner_id": cls.partner.id,
@@ -63,37 +53,38 @@
                         0,
                         0,
                         {
                             "account_id": cls.account_income.id,
                             "name": "Test line",
                             "price_unit": 50,
                             "quantity": 10,
+                            "tax_ids": False,
                         },
                     )
                 ],
             }
         )
         cls.reason = cls.env["payment.return.reason"].create(
             {"code": "RTEST", "name": "Reason Test"}
         )
         cls.invoice.action_post()
         cls.receivable_line = cls.invoice.line_ids.filtered(
-            lambda x: x.account_id.internal_type == "receivable"
+            lambda x: x.account_id.account_type == "asset_receivable"
         )
         # Create payment from invoice
         cls.payment_register_model = cls.env["account.payment.register"]
         payment_register = Form(
             cls.payment_register_model.with_context(
                 active_model="account.move", active_ids=cls.invoice.ids
             )
         )
         cls.payment = payment_register.save()._create_payments()
         cls.payment_move = cls.payment.move_id
         cls.payment_line = cls.payment_move.line_ids.filtered(
-            lambda x: x.account_id.internal_type == "receivable"
+            lambda x: x.account_id.account_type == "asset_receivable"
         )
         # Create payment return
         cls.payment_return = cls.env["payment.return"].create(
             {
                 "journal_id": cls.bank_journal.id,
                 "line_ids": [
                     (
@@ -228,18 +219,18 @@
         self.payment_return.action_confirm()
         with self.assertRaises(ValidationError):
             self.payment_return = self.env["payment.return"].create(
                 {"journal_id": self.bank_journal.id, "line_ids": [(0, 0, line_vals)]}
             )
 
     def test_payments_widget(self):
-        info = json.loads(self.invoice.invoice_payments_widget)
-        self.assertEqual(len(info["content"]), 1)
+        widget_vals = self.invoice.invoice_payments_widget
+        self.assertEqual(len(widget_vals["content"]), 1)
         self.payment_return.action_confirm()
-        info = json.loads(self.invoice.invoice_payments_widget)
+        info = self.invoice.invoice_payments_widget
         self.assertEqual(len(info["content"]), 2)
         self.assertEqual(info["content"][1]["amount"], -500.0)
 
     def test_reason_name_search(self):
         reason = self.env["payment.return.reason"]
         line = self.payment_return.line_ids[0]
         line.reason_id = reason.name_search("RTEST")[0]
```

## odoo/addons/account_payment_return/views/payment_return_view.xml

### odoo/addons/account_payment_return/views/payment_return_view.xml

```diff
@@ -37,15 +37,15 @@
                   <field name="date"/>
                   <field name="concept"/>
                   <field name="reason_id"/>
                   <field name="reason_additional_information"/>
                   <field name="partner_name" invisible="1"/>
                   <field name="partner_id"/>
                   <field name="reference"/>
-                  <field name="move_line_ids" widget="many2many_tags" options="{'no_create': True}" domain="[('partner_id', '=', partner_id),                                                     ('journal_id', '=', parent.journal_id),                                                     ('account_id.internal_type', '=', 'receivable'),                                                     ('reconciled', '=', True)]"/>
+                  <field name="move_line_ids" widget="many2many_tags" options="{'no_create': True}" domain="[('partner_id', '=', partner_id),                                                     ('journal_id', '=', parent.journal_id),                                                     ('account_id.account_type', '=', 'asset_receivable'),                                                     ('reconciled', '=', True)]"/>
                   <field name="amount" sum="Total amount"/>
                   <field name="expense_amount" sum="Total charges amount"/>
                   <field name="expense_account" attrs="{'required':[('expense_amount','!=', 0)]}"/>
                   <field name="expense_partner_id" attrs="{'required':[('expense_account','!=', False)]}"/>
                 </tree>
               </field>
             </page>
```

## Comparing `odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/METADATA` & `odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: odoo-addon-account-payment-return
-Version: 15.0.1.0.0.5
+Version: 16.0.1.0.0.2
 Summary: Manage the return of your payments
 Home-page: https://github.com/OCA/account-payment
 Author: Odoo Community Association (OCA),7 i TRIA, Tecnativa, initOS GmbH & Co.,
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 6 - Mature
-Requires-Python: >=3.8
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 =======================
 Account Payment Returns
 =======================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -27,21 +27,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Faccount--payment-lightgray.png?logo=github
-    :target: https://github.com/OCA/account-payment/tree/15.0/account_payment_return
+    :target: https://github.com/OCA/account-payment/tree/16.0/account_payment_return
     :alt: OCA/account-payment
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/account-payment-15-0/account-payment-15-0-account_payment_return
+    :target: https://translation.odoo-community.org/projects/account-payment-16-0/account-payment-16-0-account_payment_return
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/96/15.0
+    :target: https://runbot.odoo-community.org/runbot/96/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module implements customer receivables returns and allows to send
 related reconciled account move lines back to a state where the debt is still
 open, and letting history of it.
@@ -76,15 +76,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/account-payment/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/account-payment/issues/new?body=module:%20account_payment_return%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -120,12 +120,12 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/account-payment <https://github.com/OCA/account-payment/tree/15.0/account_payment_return>`_ project on GitHub.
+This module is part of the `OCA/account-payment <https://github.com/OCA/account-payment/tree/16.0/account_payment_return>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/RECORD` & `odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,12 +1,12 @@
-odoo/addons/account_payment_return/README.rst,sha256=EBOSeO8KGE3nU4b9rpm5l_oxYmsYonU_ZYj4QsefPYU,4002
+odoo/addons/account_payment_return/README.rst,sha256=IjR6qxKR64wmIuUa_Lr8Gxt4mFxVQpL-ksL6ryxx4ZY,4002
 odoo/addons/account_payment_return/__init__.py,sha256=ZGjmXT9q1Wc3A9Eb3pRZjwDcSFijPJcJLFSMyZdyxyU,86
-odoo/addons/account_payment_return/__manifest__.py,sha256=6LYDNHARqbaC-RclQtGDSdgaRM52lVp_Uv2jVtoNtTY,1409
+odoo/addons/account_payment_return/__manifest__.py,sha256=NfJo9-D5M5bmo0_tmuQX0sB1vmgCfOSMhArOUdXUaLY,1404
 odoo/addons/account_payment_return/data/ir_sequence_data.xml,sha256=E8NeGsWyKzpPV2N7Ilq5fbHq6fuoKW9fjuKLnhizvJA,588
-odoo/addons/account_payment_return/i18n/account_payment_return.pot,sha256=s7q3Z2SSNQkaSLwcWoat9W7Byn6x-vP0g5OUBjoKGw8,19595
+odoo/addons/account_payment_return/i18n/account_payment_return.pot,sha256=9VOASO3Audp8CJjKP7NFDywaRCca-v9n0AO6KUVKinE,19095
 odoo/addons/account_payment_return/i18n/am.po,sha256=pXXWZxjQL69TlnWoRzckNtr8tCFKe5v15RGzCJ8VmHQ,21047
 odoo/addons/account_payment_return/i18n/ar.po,sha256=6vf0FBlpP09q8JWk4DhR84AanZdppvMx-im2VIIckj4,21063
 odoo/addons/account_payment_return/i18n/bg.po,sha256=uUw9vIHbw5x4T4ReSKGR8iFuFnZzbnEYay3XmtJH74w,21160
 odoo/addons/account_payment_return/i18n/ca.po,sha256=vYGMdvfBE7-O6OU8qdwQTSIdu08BTckt3yHH-dM1Wyk,21451
 odoo/addons/account_payment_return/i18n/cs.po,sha256=BMoJTeq_XaVcfIMHEdCXhpMu-I7OJ4FPJkICfc_mI5w,21000
 odoo/addons/account_payment_return/i18n/de.po,sha256=D_vCQargBo9dpr-YAZdNCkkmUz4AtOcZaGJUQ77juvM,22056
 odoo/addons/account_payment_return/i18n/el_GR.po,sha256=KtDIlthN7vM2aycswtCpDhL2sUACzrI4r7UxTHO7YDA,21154
@@ -36,28 +36,28 @@
 odoo/addons/account_payment_return/i18n/sl.po,sha256=vdimWZtQ8RZOa03mLh60DZs4TItU1a5txn3vr_KkSN0,23444
 odoo/addons/account_payment_return/i18n/th.po,sha256=HUmxb-8W6xkb5b8plAW_tT88y-CY0qGpS3_Lkp_g_fA,20976
 odoo/addons/account_payment_return/i18n/tr.po,sha256=T_Piar8B32v-ReN544ug_A0NN1N2JA6TRzhNWnE1DXo,21029
 odoo/addons/account_payment_return/i18n/vi.po,sha256=luMUcSZGII4RYsgL7bd-ZPwCvVD9YDA03D23CtnMGuU,20974
 odoo/addons/account_payment_return/i18n/zh_CN.po,sha256=_tE-d3eXozH04mxnd2fEbB9hPwyABRtI6rB00p2bPF8,21031
 odoo/addons/account_payment_return/models/__init__.py,sha256=pjn-7VF4WPs9vDdosfpW3nJ9b-4GxtOZTnHWUh7W9_Y,187
 odoo/addons/account_payment_return/models/account_journal.py,sha256=OIFrwNeQxk3vLqIAkteXEJ5vv18Ql9hXS1t3lqwY8-M,587
-odoo/addons/account_payment_return/models/account_move.py,sha256=6G0LYNDu3o4vPUmR7elt3g8FOtYyLYYOalIJ4bdSZ1A,3495
-odoo/addons/account_payment_return/models/payment_return.py,sha256=7Buwb0FxbOZL63Z8NCwsbZW6hh0GHkio0kK5ZsEoEmc,17121
-odoo/addons/account_payment_return/models/payment_return_reason.py,sha256=KcDn0UTA0RLHG04Iw4RvGRfmbguOaJ_fk0SkULHr73I,852
+odoo/addons/account_payment_return/models/account_move.py,sha256=cJNZa4UZwt_DHcEufIgTahJD5KLDIJD3DZ2mdn0Sn1c,4413
+odoo/addons/account_payment_return/models/payment_return.py,sha256=Qjx4ILll78t3mD5EjvTwuKCEkztQrT1mXy0o6w393_M,17131
+odoo/addons/account_payment_return/models/payment_return_reason.py,sha256=mxWJUuVgajOF9sDfrnjk2lF0xUXBFq1_g7aZFSMGJKg,522
 odoo/addons/account_payment_return/readme/CONTRIBUTORS.rst,sha256=IEXeMrMQYmegeKx_6p6bpFIrDc3sqcdaKCc7Xx1t19g,294
 odoo/addons/account_payment_return/readme/DESCRIPTION.rst,sha256=r35yNVAOoFmd-_xzcjBTNrKJDR197GOnAZdWDCTgrmk,287
 odoo/addons/account_payment_return/readme/USAGE.rst,sha256=inbdIcqffv1PpCwwmcmBGQrQxPC00AWjjZsyAVQeNrk,761
 odoo/addons/account_payment_return/security/account_payment_return_security.xml,sha256=GoL1wdMbuItnG8WqSxv2MPYGJnd1dA1mv4MQohpbOIw,604
 odoo/addons/account_payment_return/security/ir.model.access.csv,sha256=yVYoAo2YUPu0UhHNhvSfzq6Ms6tHgb5kjOQ_HFcwj0w,401
 odoo/addons/account_payment_return/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/account_payment_return/static/description/index.html,sha256=D0ADDK_RKysl-czPCICyUc8ThT8dlsFg6ZoHvi16eho,13680
+odoo/addons/account_payment_return/static/description/index.html,sha256=ElZDpyiTkS1OwZWybSopDLD1E6FfbEntl_0VFMt4Lo0,13680
 odoo/addons/account_payment_return/static/src/scss/account_payment_return.scss,sha256=OADQKFmahWU0oshjdwXUChtnjcrxfJBDnjy7Ih-e9f8,127
-odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml,sha256=CyazztfsNhFG3UDhrIEv9rK7qXVuYoqy1nDQWlX9EPE,980
+odoo/addons/account_payment_return/static/src/xml/account_payment_return.xml,sha256=P3i-j_TzRyX0IZD8F4PDwKTf9Nduqz9JpRt3OV6UlXA,998
 odoo/addons/account_payment_return/tests/__init__.py,sha256=8WWUMQxkRxn3_Yc3ob8TZkjxUzqIdJGeai3wDYxWadw,100
-odoo/addons/account_payment_return/tests/test_payment_return.py,sha256=fNBmujRzwP0jsMhoRyjIkwrgmY01HKDnkkwdJjRuQk4,10612
+odoo/addons/account_payment_return/tests/test_payment_return.py,sha256=cA1FYrUrk-i4a_aUhuPzDLdLe-KeuXix-k6KiH_OWc8,10246
 odoo/addons/account_payment_return/views/account_journal_view.xml,sha256=N9Bp_04347swaM9Ch7ibILdFtXzwyPTGgXJfecq6fSU,695
 odoo/addons/account_payment_return/views/account_move_views.xml,sha256=W6G6ALrRMGLYYpTEjDRSzh-OLiM3FfI00zvNT-pofQ0,1426
-odoo/addons/account_payment_return/views/payment_return_view.xml,sha256=8hRYrfGPcdjjL_bZHKDP9vyXg8U7OiJaEoriSta923A,7254
-odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/METADATA,sha256=uDwAw9ptymp9UmVSRaJOvyQk9RZTncG-L6NCAm080yg,4633
-odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_account_payment_return-15.0.1.0.0.5.dist-info/RECORD,,
+odoo/addons/account_payment_return/views/payment_return_view.xml,sha256=AqPsxMFeDufzd2ax65gd1yLqh-vqASwGZ9IZvGysut4,7259
+odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/METADATA,sha256=BwSoz5gbQuQnW3MLlJV3T4thmZrDaWjdZV8rr0BpTTE,4634
+odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_account_payment_return-16.0.1.0.0.2.dist-info/RECORD,,
```

